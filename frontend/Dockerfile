FROM node:18

WORKDIR /app

COPY package*.json ./

RUN npm install

COPY . .

# Inject environment variables dynamically during build
ARG REACT_APP_AUTH_SERVICE_URL
ARG REACT_APP_CASE_SERVICE_URL
ARG REACT_APP_DIAGNOSTIC_SERVICE_URL

# Define environment variables for React build process
ENV REACT_APP_AUTH_SERVICE_URL=$REACT_APP_AUTH_SERVICE_URL
ENV REACT_APP_CASE_SERVICE_URL=$REACT_APP_CASE_SERVICE_URL
ENV REACT_APP_DIAGNOSTIC_SERVICE_URL=$REACT_APP_DIAGNOSTIC_SERVICE_URL

EXPOSE 3000

CMD ["npm", "start"]

